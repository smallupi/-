<!DOCTYPE html>
<html>
<head>
    <script>
        async function getUsers(){
            const response = await fetch("/get/users",{
                method:"GET",
                headers:{"Accept":"application/json"}
            });
            if(response.ok ==true){
                const users = await response.json();
                const rows = document.querySelector("tbody");
                users.array.forEach(user => rows.append(row(user))) 
            }
        }
        async function getUser(id){
            const response = await fetch(`/get/users/${id}`,{
                method:"GET",
                headers:{"Accept":"application/json"}
            });
            if(response.ok == true){
                const user = await response.json();
                document.getElementById("username").value = user.username;
                document.getElementById("phone").value = user.phone;
                document.getElementById("mail").value = user.mail;
                document.getElementById("password").value = user.password;
                document.getElementById("confirmpassword").value = user.confirmpassword;
                document.getElementById("card").value = user.card;
            }
            else
            {
                const error = await response.json();
                console.log(error.message);
            }
        }
        function row(user){
            const tr = document.createElement("tr");
            tr.setAttribute("data-rowid",user.id);

            const nameTD = document.createElement("td");
            nameTd.append(user.username);
            tr.append(username);

            const linkstd = document.createElement("td");
            return tr;
        }
        getUsers();
    </script>
    <style>

    </style>
</head>
<body>
    <h2>Список пользователей</h2>
    <table>
        <thead><tr><th>Имя</th><th>Возраст</th><th></th></tr></thead>
        <tbody>
        </tbody>
    </table>
  

</body>
</html>